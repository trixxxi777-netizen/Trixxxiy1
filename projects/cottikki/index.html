<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ö–æ—Ç–∏–∫ –∏–∑ HTTP API üò∫</title>
  <style>
    :root { --bg:#0b1020; --card:#121a33; --text:#e7ecff; --muted:#9fb1ff; }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background: radial-gradient(1000px 600px at 20% -10%, #1b2a62 0%, #0b1020 45%) fixed; color: var(--text); }
    .wrap { max-width: 900px; margin: 32px auto; padding: 20px; }
    .card { background: color-mix(in srgb, var(--card), #000 8%); border: 1px solid rgba(255,255,255,0.06); border-radius: 20px; padding: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.35); }
    h1 { margin: 0 0 8px; letter-spacing: .3px; }
    p { margin: 6px 0 18px; color: var(--muted); }
    .row { display: grid; grid-template-columns: 1fr; gap: 16px; }
    @media (min-width: 880px) { .row { grid-template-columns: 1.2fr .8fr; } }
    button { appearance: none; background: linear-gradient(180deg, #7aa8ff, #5e86ff); color: #fff; border: none; padding: 12px 16px; border-radius: 14px; font-weight: 700; cursor: pointer; box-shadow: 0 6px 16px rgba(94,134,255,.35); }
    button[disabled] { opacity: .6; cursor: progress; }
    .toolbar { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
    .imgBox { position: relative; border-radius: 16px; overflow: hidden; min-height: 320px; background: #0a0f26; border: 1px solid rgba(255,255,255,.06); display: grid; place-items: center; }
    .imgBox img { width: 100%; height: 100%; object-fit: contain; display: block; }
    .status { font-size: 14px; color: var(--muted); }
    .json { background: #0a0f26; border: 1px solid rgba(255,255,255,.06); border-radius: 12px; padding: 12px; overflow: auto; max-height: 480px; font: 12px/1.4 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; color: #d6e1ff; }
    .hint { font-size: 12px; color: #c3d1ff; opacity: .8; margin-top: 6px; }
    code { background: rgba(255,255,255,.08); padding: 2px 6px; border-radius: 6px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
    .footer { opacity: .7; margin-top: 18px; font-size: 12px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>–ú–∏–Ω–∏‚Äë—Å–∞–π—Ç –Ω–∞ ¬´—á–∏—Å—Ç–æ–º¬ª HTTP</h1>
      <p>–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É –∫–æ—Ç–∏–∫–∞ –ø–æ <code>GET https://api.thecatapi.com/v1/images/search</code> –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ù–∏–∫–∞–∫–∏—Ö SDK ‚Äî —Ç–æ–ª—å–∫–æ HTTP –∏ JSON.</p>

      <div class="toolbar">
        <button id="btn">–ù–æ–≤—ã–π –∫–æ—Ç–∏–∫ üò∫</button>
        <span class="status" id="status">–ì–æ—Ç–æ–≤–æ</span>
      </div>

      <div class="row" style="margin-top:16px;">
        <div>
          <div class="imgBox" id="imgBox">
            <span class="status">–ù–∞–∂–º–∏—Ç–µ ¬´–ù–æ–≤—ã–π –∫–æ—Ç–∏–∫¬ª</span>
          </div>
          <div class="hint">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è CORS, –∫–ª—é—á –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —Ç–µ—Å—Ç–æ–≤ (—É Cat API –µ—Å—Ç—å –ª–∏–º–∏—Ç—ã –±–µ–∑ –∫–ª—é—á–∞).</div>
        </div>
        <div>
          <div class="json" id="json">{/* –ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è JSON –æ—Ç–≤–µ—Ç */}</div>
        </div>
      </div>

      <div class="footer">
        <p><strong>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</strong> –ö–Ω–æ–ø–∫–∞ –≤—ã–∑—ã–≤–∞–µ—Ç <code>fetch()</code> ‚Üí HTTP‚Äë–∑–∞–ø—Ä–æ—Å ‚Üí –æ—Ç–≤–µ—Ç –≤ JSON ‚Üí –±–µ—Ä—ë–º <code>data[0].url</code> –∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –≤ <code>&lt;img&gt;</code>.</p>
        <p>–•–æ—á–µ—à—å –∑–∞–º–µ–Ω–∏—Ç—å API? –ü–æ–¥—Å—Ç–∞–≤—å –ª—é–±–æ–π –¥—Ä—É–≥–æ–π –ø—É–±–ª–∏—á–Ω—ã–π <code>GET</code> (–Ω–∞–ø—Ä–∏–º–µ—Ä, <code>https://v2.jokeapi.dev/joke/Any</code>) –∏ –≤—ã–≤–µ–¥–∏ –ø–æ–ª–µ <code>joke</code> –∏–ª–∏ <code>setup</code>/<code>delivery</code>.</p>
      </div>
    </div>
  </div>

  <script>
    const btn = document.getElementById('btn');
    const statusEl = document.getElementById('status');
    const imgBox = document.getElementById('imgBox');
    const jsonBox = document.getElementById('json');

    async function loadCat() {
      btn.disabled = true;
      statusEl.textContent = '–ó–∞–≥—Ä—É–∂–∞—é‚Ä¶';
      imgBox.innerHTML = '<span class="status">–ü–æ–ª—É—á–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ‚Ä¶</span>';
      jsonBox.textContent = '';

      try {
        // 1) –î–µ–ª–∞–µ–º –æ–±—ã—á–Ω—ã–π HTTP GET –∑–∞–ø—Ä–æ—Å
        const resp = await fetch('https://api.thecatapi.com/v1/images/search');
        if (!resp.ok) throw new Error(`HTTP ${resp.status}`);

        // 2) –ü–∞—Ä—Å–∏–º JSON
        const data = await resp.json();
        const item = Array.isArray(data) && data[0] ? data[0] : null;
        if (!item || !item.url) throw new Error('–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞');

        // 3) –†–µ–Ω–¥–µ—Ä–∏–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        const img = new Image();
        img.alt = '–°–ª—É—á–∞–π–Ω—ã–π –∫–æ—Ç–∏–∫ –∏–∑ The Cat API';
        img.decoding = 'async';
        img.loading = 'lazy';
        img.src = item.url;
        imgBox.innerHTML = '';
        imgBox.appendChild(img);

        // 4) –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—ã—Ä–æ–π JSON –∫—Ä–∞—Å–∏–≤–æ
        jsonBox.textContent = JSON.stringify(item, null, 2);
        statusEl.textContent = '–ì–æ—Ç–æ–≤–æ';
      } catch (err) {
        statusEl.textContent = '–û—à–∏–±–∫–∞';
        imgBox.innerHTML = `<span class="status">–£–ø—Å: ${err.message}</span>`;
        jsonBox.textContent = (err && err.stack) ? err.stack : String(err);
      } finally {
        btn.disabled = false;
      }
    }

    btn.addEventListener('click', loadCat);
  </script>
</body>
</html>
