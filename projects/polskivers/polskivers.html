<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ü–æ–ª—å—Å–∫–∏–µ –≤—Ä–µ–º–µ–Ω–∞ ‚Äî —Ç—Ä–µ–Ω–∞–∂—ë—Ä</title>
  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, "Noto Sans", sans-serif; }
    body { margin: 0; background: #0b1020; color: #e7ecff; }
    .wrap { max-width: 900px; margin: 0 auto; padding: 24px; }
    .card { background: #111735; border: 1px solid #273063; border-radius: 18px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,.35); }
    h1 { font-size: clamp(22px, 3vw, 32px); margin: 0 0 8px; letter-spacing: .3px; }
    p.sub { margin: 0 0 18px; color: #a9b8ff; }
    .controls { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 18px; }
    button { cursor: pointer; font-weight: 600; border: none; padding: 12px 16px; border-radius: 12px; background: #4c6fff; color: white; box-shadow: 0 6px 16px rgba(76,111,255,.35); transition: transform .04s ease, filter .2s; }
    button.secondary { background: #2a335f; box-shadow: none; color: #e7ecff; border: 1px solid #3a4482; }
    button:active { transform: translateY(1px); }
    .out { display: grid; gap: 10px; }
    .row { background: #0e1533; border: 1px solid #273063; border-radius: 14px; padding: 14px; display: grid; gap: 6px; }
    .lbl { color: #94a3ff; font-size: 13px; text-transform: uppercase; letter-spacing: .12em; }
    .big { font-size: clamp(20px, 3.2vw, 30px); line-height: 1.25; }
    .mid { font-size: clamp(16px, 2.6vw, 22px); line-height: 1.3; }
    .hint { color: #9fb0ff; font-size: 13px; }
    .flex { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
    .tag { font-size: 12px; padding: 4px 8px; border-radius: 999px; background: #1a214a; border: 1px solid #2a3474; color: #b9c5ff; }
    .footer { margin-top: 14px; color: #9fb0ff; font-size: 13px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
    .grid2 { display: grid; grid-template-columns: 1fr; gap: 12px; }
    @media (min-width: 720px) { .grid2 { grid-template-columns: 1fr 1fr; } }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>–ú–∏–Ω–∏‚Äë—Ç—Ä–µ–Ω–∞–∂—ë—Ä –ø–æ–ª—å—Å–∫–∏—Ö –≤—Ä–µ–º–µ–Ω</h1>
      <p class="sub">–î–≤–µ –∫–Ω–æ–ø–∫–∏: –ø–µ—Ä–≤–∞—è –º–µ–Ω—è–µ—Ç –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ (–Ω–∞ —Ä—É—Å—Å–∫–æ–º), –≤—Ç–æ—Ä–∞—è –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å—Å–∫–∏–π –≥–ª–∞–≥–æ–ª –≤ —Å–ª—É—á–∞–π–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–ø—Ä–æ—à–µ–¥—à–µ–µ –∏–ª–∏ —Å–ª–æ–∂–Ω–æ–µ –±—É–¥—É—â–µ–µ) —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º.
      <br><span class="hint">–ü–µ—Ä–µ–≤–æ–¥ –¥–∞–Ω –≤ –∏–Ω—Ñ–∏–Ω–∏—Ç–∏–≤–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º. –ù–∞–∂–∏–º–∞–π –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è —á—Ç–æ‚Äë—Ç–æ –≤–æ—Å—Ö–∏—Ç–∏—Ç–µ–ª—å–Ω–æ —Å—Ç—Ä–∞–Ω–Ω–æ–µ.</span></p>

      <div class="controls">
        <button id="btnPron">üîÄ –°–ª—É—á–∞–π–Ω–æ–µ –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ</button>
        <button id="btnVerb" class="secondary">‚ö° –ü–æ–¥–æ–±—Ä–∞—Ç—å –≥–ª–∞–≥–æ–ª</button>
      </div>

      <div class="grid2">
        <div class="row">
          <div class="lbl">–ú–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ (RU ‚Üí PL)</div>
          <div class="big" id="pronRow">‚Äî</div>
          <div class="flex" id="gramTags"></div>
        </div>

        <div class="row">
          <div class="lbl">–§—Ä–∞–∑–∞ –ø–æ‚Äë–ø–æ–ª—å—Å–∫–∏</div>
          <div class="big" id="plOut">‚Äî</div>
          <div class="hint" id="tenseHint">&nbsp;</div>
        </div>
      </div>

      <div class="row" style="margin-top:12px;">
        <div class="lbl">–ü–µ—Ä–µ–≤–æ–¥ (RU)</div>
        <div class="mid" id="ruOut">‚Äî</div>
      </div>

      <div class="footer">100 –≥–ª–∞–≥–æ–ª–æ–≤, –≤—Å–µ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–≥–æ –≤–∏–¥–∞, —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞–ª–∏ –ø—Ä–æ—à–µ–¥—à–µ–µ –∏ —Å–ª–æ–∂–Ω–æ–µ –±—É–¥—É—â–µ–µ (<span class="mono">bƒôdƒô + bezokolicznik</span>). –í–æ–∑–≤—Ä–∞—Ç–Ω–æ–µ <span class="mono">siƒô</span> —Å—Ç–∞–≤–∏–º –ø–æ—Å–ª–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ: <span class="mono">bƒôdƒô <b>siƒô</b> uczyƒá</span>, –≤ –ø—Ä–æ—à–µ–¥—à–µ–º ‚Äî –ø–æ—Å–ª–µ —Å–º—ã—Å–ª–æ–≤–æ–≥–æ: <span class="mono">uczy≈Çem <b>siƒô</b></span>.</div>
    </div>
  </div>

<script>
// === –î–ê–ù–ù–´–ï ===
const PRONOUNS = [
  { ru: '—è',  pl: 'ja',  person:1, number:'sg' },
  { ru: '—Ç—ã', pl: 'ty',  person:2, number:'sg' },
  { ru: '–æ–Ω', pl: 'on',  person:3, number:'sg', gender:'m' },
  { ru: '–æ–Ω–∞', pl: 'ona', person:3, number:'sg', gender:'f' },
  { ru: '–æ–Ω–æ', pl: 'ono', person:3, number:'sg', gender:'n' },
  { ru: '–º—ã', pl: 'my',  person:1, number:'pl' },
  { ru: '–≤—ã', pl: 'wy',  person:2, number:'pl' },
  { ru: '–æ–Ω–∏', pl: 'oni', person:3, number:'pl', mascPersonal:true },
  { ru: '–æ–Ω–µ', pl: 'one', person:3, number:'pl', mascPersonal:false },
];

// 100 –≥–ª–∞–≥–æ–ª–æ–≤ (–≤—Å–µ –Ω–µ—Å–æ–≤. –≤–∏–¥). pl: –∏–Ω—Ñ–∏–Ω–∏—Ç–∏–≤; ru: –∏–Ω—Ñ–∏–Ω–∏—Ç–∏–≤; refl: –≤–æ–∑–≤—Ä–∞—Ç–Ω—ã–π –ª–∏ (–µ—Å—Ç—å –ª–∏ " siƒô")
const VERBS = [
  {pl:'czytaƒá', ru:'—á–∏—Ç–∞—Ç—å'},
  {pl:'pisaƒá', ru:'–ø–∏—Å–∞—Ç—å'},
  {pl:'m√≥wiƒá', ru:'–≥–æ–≤–æ—Ä–∏—Ç—å'},
  {pl:'robiƒá', ru:'–¥–µ–ª–∞—Ç—å'},
  {pl:'liczyƒá', ru:'—Å—á–∏—Ç–∞—Ç—å'},
  {pl:'uczyƒá siƒô', ru:'—É—á–∏—Ç—å—Å—è', refl:true},
  {pl:'pracowaƒá', ru:'—Ä–∞–±–æ—Ç–∞—Ç—å'},
  {pl:'mieszkaƒá', ru:'–∂–∏—Ç—å (–ø—Ä–æ–∂–∏–≤–∞—Ç—å)'},
  {pl:'my≈õleƒá', ru:'–¥—É–º–∞—Ç—å'},
  {pl:'oglƒÖdaƒá', ru:'—Å–º–æ—Ç—Ä–µ—Ç—å'},
  {pl:'s≈Çuchaƒá', ru:'—Å–ª—É—à–∞—Ç—å'},
  {pl:'pytaƒá', ru:'—Å–ø—Ä–∞—à–∏–≤–∞—Ç—å'},
  {pl:'odpowiadaƒá', ru:'–æ—Ç–≤–µ—á–∞—Ç—å'},
  {pl:'kupowaƒá', ru:'–ø–æ–∫—É–ø–∞—Ç—å'},
  {pl:'sprzedawaƒá', ru:'–ø—Ä–æ–¥–∞–≤–∞—Ç—å'},
  {pl:'gotowaƒá', ru:'–≥–æ—Ç–æ–≤–∏—Ç—å'},
  {pl:'sprzƒÖtaƒá', ru:'—É–±–∏—Ä–∞—Ç—å'},
  {pl:'ta≈Ñczyƒá', ru:'—Ç–∞–Ω—Ü–µ–≤–∞—Ç—å'},
  {pl:'≈õpiewaƒá', ru:'–ø–µ—Ç—å'},
  {pl:'biegaƒá', ru:'–±–µ–≥–∞—Ç—å'},
  {pl:'chodziƒá', ru:'—Ö–æ–¥–∏—Ç—å'},
  {pl:'p≈Çywaƒá', ru:'–ø–ª–∞–≤–∞—Ç—å'},
  {pl:'graƒá', ru:'–∏–≥—Ä–∞—Ç—å'},
  {pl:'je≈∫dziƒá', ru:'–µ–∑–¥–∏—Ç—å'},
  {pl:'podr√≥≈ºowaƒá', ru:'–ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞—Ç—å'},
  {pl:'otwieraƒá', ru:'–æ—Ç–∫—Ä—ã–≤–∞—Ç—å'},
  {pl:'zamykaƒá', ru:'–∑–∞–∫—Ä—ã–≤–∞—Ç—å'},
  {pl:'zaczynaƒá', ru:'–Ω–∞—á–∏–Ω–∞—Ç—å'},
  {pl:'ko≈Ñczyƒá', ru:'–∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å'},
  {pl:'pomagaƒá', ru:'–ø–æ–º–æ–≥–∞—Ç—å'},
  {pl:'pr√≥bowaƒá', ru:'–ø—Ä–æ–±–æ–≤–∞—Ç—å'},
  {pl:'planowaƒá', ru:'–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å'},
  {pl:'dzwoniƒá', ru:'–∑–≤–æ–Ω–∏—Ç—å'},
  {pl:'wysy≈Çaƒá', ru:'–æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å'},
  {pl:'odbieraƒá', ru:'–ø–æ–ª—É—á–∞—Ç—å/–∑–∞–±–∏—Ä–∞—Ç—å'},
  {pl:'czekaƒá', ru:'–∂–¥–∞—Ç—å'},
  {pl:'spotykaƒá', ru:'–≤—Å—Ç—Ä–µ—á–∞—Ç—å'},
  {pl:'odwiedzaƒá', ru:'–Ω–∞–≤–µ—â–∞—Ç—å/–ø–æ—Å–µ—â–∞—Ç—å'},
  {pl:'zapraszaƒá', ru:'–ø—Ä–∏–≥–ª–∞—à–∞—Ç—å'},
  {pl:'dziƒôkowaƒá', ru:'–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å'},
  {pl:'prosiƒá', ru:'–ø—Ä–æ—Å–∏—Ç—å'},
  {pl:'szukaƒá', ru:'–∏—Å–∫–∞—Ç—å'},
  {pl:'znajdowaƒá', ru:'–Ω–∞—Ö–æ–¥–∏—Ç—å'},
  {pl:'czy≈õciƒá', ru:'—á–∏—Å—Ç–∏—Ç—å'},
  {pl:'malowaƒá', ru:'–∫—Ä–∞—Å–∏—Ç—å/—Ä–∏—Å–æ–≤–∞—Ç—å'},
  {pl:'rysowaƒá', ru:'—Ä–∏—Å–æ–≤–∞—Ç—å'},
  {pl:'naprawiaƒá', ru:'—á–∏–Ω–∏—Ç—å'},
  {pl:'u≈ºywaƒá', ru:'–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å'},
  {pl:'zmieniaƒá', ru:'–º–µ–Ω—è—Ç—å'},
  {pl:'pamiƒôtaƒá', ru:'–ø–æ–º–Ω–∏—Ç—å'},
  {pl:'zapominaƒá', ru:'–∑–∞–±—ã–≤–∞—Ç—å'},
  {pl:'wierzyƒá', ru:'–≤–µ—Ä–∏—Ç—å'},
  {pl:'nosiƒá', ru:'–Ω–æ—Å–∏—Ç—å'},
  {pl:'ubieraƒá siƒô', ru:'–æ–¥–µ–≤–∞—Ç—å—Å—è', refl:true},
  {pl:'myƒá', ru:'–º—ã—Ç—å'},
  {pl:'czesaƒá', ru:'–ø—Ä–∏—á—ë—Å—ã–≤–∞—Ç—å'},
  {pl:'budowaƒá', ru:'—Å—Ç—Ä–æ–∏—Ç—å'},
  {pl:'paliƒá', ru:'–∫—É—Ä–∏—Ç—å/–∂–µ—á—å'},
  {pl:'≈õwieciƒá', ru:'—Å–≤–µ—Ç–∏—Ç—å'},
  {pl:'siadaƒá', ru:'—Å–∞–¥–∏—Ç—å—Å—è'},
  {pl:'wstawaƒá', ru:'–≤—Å—Ç–∞–≤–∞—Ç—å'},
  {pl:'padaƒá', ru:'–ø–∞–¥–∞—Ç—å'},
  {pl:'laƒá', ru:'–ª–∏—Ç—å'},
  {pl:'zamawiaƒá', ru:'–∑–∞–∫–∞–∑—ã–≤–∞—Ç—å'},
  {pl:'sma≈ºyƒá', ru:'–∂–∞—Ä–∏—Ç—å'},
  {pl:'kroiƒá', ru:'—Ä–µ–∑–∞—Ç—å'},
  {pl:'mieszaƒá', ru:'–º–µ—à–∞—Ç—å'},
  {pl:'dodawaƒá', ru:'–¥–æ–±–∞–≤–ª—è—Ç—å'},
  {pl:'smakowaƒá', ru:'–∏–º–µ—Ç—å –≤–∫—É—Å/–ø—Ä–æ–±–æ–≤–∞—Ç—å'},
  {pl:'odpoczywaƒá', ru:'–æ—Ç–¥—ã—Ö–∞—Ç—å'},
  {pl:'spacerowaƒá', ru:'–≥—É–ª—è—Ç—å'},
  {pl:'u≈õmiechaƒá siƒô', ru:'—É–ª—ã–±–∞—Ç—å—Å—è', refl:true},
  {pl:'≈õmiaƒá siƒô', ru:'—Å–º–µ—è—Ç—å—Å—è', refl:true},
  {pl:'p≈Çakaƒá', ru:'–ø–ª–∞–∫–∞—Ç—å'},
  {pl:'martwiƒá siƒô', ru:'–ø–µ—Ä–µ–∂–∏–≤–∞—Ç—å/–≤–æ–ª–Ω–æ–≤–∞—Ç—å—Å—è', refl:true},
  {pl:'baƒá siƒô', ru:'–±–æ—è—Ç—å—Å—è', refl:true},
  {pl:'cieszyƒá siƒô', ru:'—Ä–∞–¥–æ–≤–∞—Ç—å—Å—è', refl:true},
  {pl:'interesowaƒá siƒô', ru:'–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞—Ç—å—Å—è', refl:true},
  {pl:'denerwowaƒá siƒô', ru:'–Ω–µ—Ä–≤–Ω–∏—á–∞—Ç—å', refl:true},
  {pl:'nudziƒá siƒô', ru:'—Å–∫—É—á–∞—Ç—å', refl:true},
  {pl:'bawiƒá siƒô', ru:'—Ä–∞–∑–≤–ª–µ–∫–∞—Ç—å—Å—è/–∏–≥—Ä–∞—Ç—å', refl:true},
  {pl:'uczyƒá', ru:'—É—á–∏—Ç—å'},
  {pl:'t≈Çumaczyƒá', ru:'–ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å/–æ–±—ä—è—Å–Ω—è—Ç—å'},
  {pl:'opowiadaƒá', ru:'—Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å'},
  {pl:'zapisywaƒá', ru:'–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å'},
  {pl:'przynosiƒá', ru:'–ø—Ä–∏–Ω–æ—Å–∏—Ç—å'},
  {pl:'wynosiƒá', ru:'–≤—ã–Ω–æ—Å–∏—Ç—å'},
  {pl:'w≈ÇƒÖczaƒá', ru:'–≤–∫–ª—é—á–∞—Ç—å'},
  {pl:'wy≈ÇƒÖczaƒá', ru:'–≤—ã–∫–ª—é—á–∞—Ç—å'},
  {pl:'po≈ºyczaƒá', ru:'–æ–¥–∞–ª–∂–∏–≤–∞—Ç—å'},
  {pl:'kopaƒá', ru:'–∫–æ–ø–∞—Ç—å/–ø–∏–Ω–∞—Ç—å'},
  {pl:'ciƒÖƒá', ru:'—Ä–µ–∑–∞—Ç—å/—Ä—É–±–∏—Ç—å'},
  {pl:'gasiƒá', ru:'–≥–∞—Å–∏—Ç—å'},
  {pl:'zapalaƒá', ru:'–∑–∞–∂–∏–≥–∞—Ç—å'},
  {pl:'d≈∫wigaƒá', ru:'–ø–æ–¥–Ω–∏–º–∞—Ç—å/–Ω–µ—Å—Ç–∏ —Ç—è–∂–µ—Å—Ç–∏'},
  {pl:'ciƒÖgnƒÖƒá', ru:'—Ç—è–Ω—É—Ç—å'},
  {pl:'pchaƒá', ru:'—Ç–æ–ª–∫–∞—Ç—å'},
  {pl:'dotykaƒá', ru:'—Ç—Ä–æ–≥–∞—Ç—å'},
  {pl:'ca≈Çowaƒá', ru:'—Ü–µ–ª–æ–≤–∞—Ç—å'},
  {pl:'≈ºartowaƒá', ru:'—à—É—Ç–∏—Ç—å'},
];

function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

let currentPron = PRONOUNS[0];

function showPronoun(){
  const tagBox = document.getElementById('gramTags');
  tagBox.innerHTML = '';

  // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–¥–ø–∏—Å–∏
  const tags = [];
  tags.push(currentPron.number === 'sg' ? '–µ–¥. —á–∏—Å–ª–æ' : '–º–Ω. —á–∏—Å–ª–æ');
  if (currentPron.gender) tags.push(currentPron.gender === 'm' ? '–º. —Ä–æ–¥' : currentPron.gender === 'f' ? '–∂. —Ä–æ–¥' : '—Å—Ä. —Ä–æ–¥');
  if (currentPron.number==='pl' && currentPron.person===3) tags.push(currentPron.mascPersonal ? '–º—É–∂. –ª–∏—Ü–∞' : '–Ω–µ‚Äë–º—É–∂. –ª–∏—Ü–∞');

  document.getElementById('pronRow').innerHTML = `${currentPron.ru} ‚Üí <b>${currentPron.pl}</b>`;
  for(const t of tags){
    const el = document.createElement('span');
    el.className = 'tag';
    el.textContent = t;
    tagBox.appendChild(el);
  }
}

function polishPast(inf, pron){
  // –û—á–µ–Ω—å —É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≥–ª–∞–≥–æ–ª–æ–≤:
  // pastRoot = –∏–Ω—Ñ–∏–Ω–∏—Ç–∏–≤ –±–µ–∑ –∫–æ–Ω–µ—á–Ω–æ–π "ƒá"; –¥–∞–ª–µ–µ —Å—É—Ñ—Ñ–∏–∫—Å—ã: ≈Ç/≈Ça/≈Ço/≈Çem/≈Çam/≈Çe≈õ/≈Ça≈õ/li≈õmy/≈Çy≈õmy/li≈õcie/≈Çy≈õcie/li/≈Çy
  const isRefl = inf.includes(' siƒô');
  const cleanInf = inf.replace(' siƒô','');
  let root = cleanInf.endsWith('ƒá') ? cleanInf.slice(0,-1) : cleanInf; // usu≈Ñ "ƒá"

  const endings = {
    '1sg_m': '≈Çem', '1sg_f':'≈Çam',
    '2sg_m': '≈Çe≈õ', '2sg_f':'≈Ça≈õ',
    '3sg_m': '≈Ç',   '3sg_f':'≈Ça', '3sg_n':'≈Ço',
    '1pl_m': 'li≈õmy', '1pl_f': '≈Çy≈õmy',
    '2pl_m': 'li≈õcie','2pl_f': '≈Çy≈õcie',
    '3pl_m': 'li',    '3pl_f': '≈Çy'
  };

  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω—É–∂–Ω—É—é –ø–∞—Ä—É/—Ä–æ–¥
  let endKey;
  if(pron.number==='sg'){
    if(pron.person===1){ // ja ‚Äî —Å–ª—É—á–∞–π–Ω—ã–π —Ä–æ–¥
      const fem = Math.random() < 0.5;
      endKey = '1sg_' + (fem?'f':'m');
    } else if(pron.person===2){ // ty ‚Äî —Å–ª—É—á–∞–π–Ω—ã–π —Ä–æ–¥
      const fem = Math.random() < 0.5;
      endKey = '2sg_' + (fem?'f':'m');
    } else { // on/ona/ono
      endKey = '3sg_' + (pron.gender||'m');
    }
  } else { // plural
    if(pron.person===1){ // my ‚Äî —Å–ª—É—á–∞–π–Ω–∞—è –º—É–∂.–ª–∏—á–Ω–æ—Å—Ç—å
      const mp = Math.random() < 0.5;
      endKey = '1pl_' + (mp?'m':'f');
    } else if(pron.person===2){ // wy ‚Äî —Å–ª—É—á–∞–π–Ω–∞—è –º—É–∂.–ª–∏—á–Ω–æ—Å—Ç—å
      const mp = Math.random() < 0.5;
      endKey = '2pl_' + (mp?'m':'f');
    } else { // 3 pl: oni/one
      endKey = '3pl_' + ((pron.mascPersonal)?'m':'f');
    }
  }

  let verb = root + endings[endKey];
  if(isRefl) verb += ' siƒô';
  return verb;
}

function polishFutureCompound(inf, pron){
  const isRefl = inf.includes(' siƒô');
  const cleanInf = inf.replace(' siƒô','');
  const aux = (function(){
    if(pron.number==='sg'){
      if(pron.person===1) return 'bƒôdƒô';
      if(pron.person===2) return 'bƒôdziesz';
      return 'bƒôdzie';
    } else {
      if(pron.person===1) return 'bƒôdziemy';
      if(pron.person===2) return 'bƒôdziecie';
      return 'bƒôdƒÖ';
    }
  })();
  // –í —Å–ª–æ–∂–Ω–æ–º –±—É–¥—É—â–µ–º "siƒô" —Å—Ç–∞–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ
  return `${aux}${isRefl?' siƒô':''} ${cleanInf}`;
}

function russianPast(inf, pron){
  // –ì—Ä—É–±–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–æ—à–µ–¥—à–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º: –∏–Ω—Ñ–∏–Ω–∏—Ç–∏–≤ –º–∏–Ω—É—Å "—Ç—å" (+"—Å—è" —Å–æ—Ö—Ä–∞–Ω—è–µ–º) + –ª/–ª–∞/–ª–æ/–ª–∏
  // –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –≥–ª–∞–≥–æ–ª–æ–≤ –∏–∑ —Å–ø–∏—Å–∫–∞.
  const refl = inf.endsWith('—Å—è') || inf.endsWith('—Å—å');
  const wasSoft = inf.endsWith('—Å—å');
  let base = inf;
  if(refl){ base = inf.slice(0, -2); } // —É–±—Ä–∞—Ç—å "—Å—è"/"—Å—å" –≤—Ä–µ–º–µ–Ω–Ω–æ
  if(base.endsWith('—Ç—å')) base = base.slice(0,-2);
  let end;
  if(pron.number==='sg'){
    if(pron.person===3){
      end = pron.gender==='f' ? '–ª–∞' : pron.gender==='n' ? '–ª–æ' : '–ª';
    } else {
      const fem = Math.random()<0.5;
      end = fem ? '–ª–∞' : '–ª';
    }
  } else {
    end = '–ª–∏';
  }
  let word = base + end;
  if(refl) word += wasSoft ? '—Å—å' : '—Å—è';
  return word;
}

function russianFutureCompound(inf, pron){
  const aux = (function(){
    if(pron.number==='sg'){
      if(pron.person===1) return '–±—É–¥—É';
      if(pron.person===2) return '–±—É–¥–µ—à—å';
      return '–±—É–¥–µ—Ç';
    } else {
      if(pron.person===1) return '–±—É–¥–µ–º';
      if(pron.person===2) return '–±—É–¥–µ—Ç–µ';
      return '–±—É–¥—É—Ç';
    }
  })();
  return `${aux} ${inf}`;
}

function makePhrase(){
  const v = pick(VERBS);
  const tense = Math.random() < 0.5 ? 'past' : 'fut';
  const plPron = currentPron.pl;
  let plVerb, ruVerb;

  if(tense==='past'){
    plVerb = polishPast(v.pl, currentPron);
    ruVerb = russianPast(v.ru, currentPron);
  } else {
    plVerb = polishFutureCompound(v.pl, currentPron);
    ruVerb = russianFutureCompound(v.ru, currentPron);
  }

  // –°–æ–±–µ—Ä—ë–º —Å—Ç—Ä–æ–∫–∏
  const pl = `${plPron} ${plVerb}`;
  const ru = `${currentPron.ru} ${ruVerb}`;

  // –í—ã–≤–æ–¥
  document.getElementById('plOut').textContent = pl;
  document.getElementById('ruOut').textContent = ru + `  ‚Äî  (${v.pl} ‚Üí ${v.ru})`;
  document.getElementById('tenseHint').textContent = (tense==='past'?
    '–í—Ä–µ–º—è: –ø—Ä–æ—à–µ–¥—à–µ–µ (czas przesz≈Çy) ‚Äî —Ä–æ–¥/—á–∏—Å–ª–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã.' :
    '–í—Ä–µ–º—è: –±—É–¥—É—â–µ–µ —Å–æ—Å—Ç–∞–≤–Ω–æ–µ (czas przysz≈Çy z≈Ço≈ºony) ‚Äî "bƒôdƒô/bƒôdziesz/‚Ä¶ + bezokolicznik".'
  );
}

// === –ò–ù–ò–¢ ===
currentPron = pick(PRONOUNS);
showPronoun();

// === UI ===
const btnPron = document.getElementById('btnPron');
const btnVerb = document.getElementById('btnVerb');
btnPron.addEventListener('click', ()=>{ currentPron = pick(PRONOUNS); showPronoun(); });
btnVerb.addEventListener('click', ()=>{ makePhrase(); });

</script>
</body>
</html>
